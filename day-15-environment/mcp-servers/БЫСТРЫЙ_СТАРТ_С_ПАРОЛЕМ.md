# üîê –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å API –∫–ª—é—á–æ–º

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π.

## 1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–∞—Ä–æ–ª–µ–º

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å API –∫–ª—é—á
export MCP_API_KEY="–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python launcher.py telegram
```

**–ò–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á:**
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–ª—é—á
export MCP_API_KEY=$(python3 -c "import secrets; print(secrets.token_urlsafe(32))")
echo "–í–∞—à API –∫–ª—é—á: $MCP_API_KEY"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python launcher.py telegram
```

## 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
./test_with_auth.sh telegram "–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á"
```

–ò–ª–∏ –µ—Å–ª–∏ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
./test_with_auth.sh telegram
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–±–µ–∑ –ø–∞—Ä–æ–ª—è)
curl http://localhost:8001/health

# 2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ–∑ –ø–∞—Ä–æ–ª—è (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ 401)
curl http://localhost:8001/tools

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º
curl -H "X-API-Key: –≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á" http://localhost:8001/tools
```

## 3Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Kotlin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```
Name: Telegram MCP
URL: http://localhost:8001/sse
API Key: –≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á
Type: SSE
```

## üìã –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–µ—Ä–æ–≤

| –°–µ—Ä–≤–µ—Ä     | –ü–æ—Ä—Ç |
|------------|------|
| github     | 8000 |
| telegram   | 8001 |
| weather    | 8002 |
| timeservice| 8003 |
| currency   | 8004 |
| fileops    | 8005 |
| docker     | 8006 |
| adb        | 8007 |

## üîç –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

### Telegram (8001)
```bash
export MCP_API_KEY="telegram-key-123"
python launcher.py telegram
curl -H "X-API-Key: telegram-key-123" http://localhost:8001/tools
```

### GitHub (8000)
```bash
export MCP_API_KEY="github-key-456"
export GITHUB_TOKEN="ghp_your_token"  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
python launcher.py github
curl -H "X-API-Key: github-key-456" http://localhost:8000/tools
```

### Docker (8006)
```bash
export MCP_API_KEY="docker-key-789"
python launcher.py docker
curl -H "X-API-Key: docker-key-789" http://localhost:8006/tools
```

### ADB (8007)
```bash
export MCP_API_KEY="adb-key-101"
python launcher.py adb
curl -H "X-API-Key: adb-key-101" http://localhost:8007/tools
```

## ‚úÖ –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —É—Å–ø–µ—à–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `./test_with_auth.sh` –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
=== Testing MCP Server with Authentication ===
Server: telegram
Port: 8001
API Key: –≤–∞—à-–∫–ª—é—á...

[1/5] Testing health endpoint (no auth)...
‚úÖ Health check passed

[2/5] Testing root endpoint (no auth)...
‚úÖ Root endpoint accessible

[3/5] Testing tools endpoint without auth (expect 401)...
‚úÖ Correctly rejected unauthorized access

[4/5] Testing tools endpoint with X-API-Key header...
‚úÖ Successfully authenticated with API key
Available tools: 3

[5/5] Testing SSE connection with auth...
‚úÖ Connected to SSE endpoint
‚úÖ MCP initialize successful
‚úÖ MCP tools/list successful

================================================
‚úÖ All authentication tests passed!
================================================
```

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. "Connection refused"
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
export MCP_API_KEY="–≤–∞—à-–∫–ª—é—á"
python launcher.py telegram
```

### 2. "401 Unauthorized"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á –∏–ª–∏ –∫–ª—é—á –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
echo $MCP_API_KEY

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á –≤ –∑–∞–ø—Ä–æ—Å–µ
curl -H "X-API-Key: $MCP_API_KEY" http://localhost:8001/tools
```

### 3. "Failed to get session ID"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å SSE —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://localhost:8001/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∫–ª—é—á–∏:**
   ```bash
   python3 -c "import secrets; print(secrets.token_urlsafe(32))"
   ```

2. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏ –≤ git** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

3. **–†–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤**

4. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS**

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [TESTING_WITH_AUTH.md](TESTING_WITH_AUTH.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- [README.md](README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [TESTING.md](TESTING.md) - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
export MCP_API_KEY=$(python3 -c "import secrets; print(secrets.token_urlsafe(32))")

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python launcher.py telegram

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./test_with_auth.sh telegram

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://localhost:8001/health

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
curl -H "X-API-Key: $MCP_API_KEY" http://localhost:8001/tools
```
